<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>blm.io</title>
 <link href="http://blmoore.github.io/blogatom.xml" rel="self"/>
 <link href="http://blmoore.github.io/blog"/>
 <updated>2014-06-17T22:55:14+01:00</updated>
 <id>http://blmoore.github.io</id>
 <author>
   <name>Ben Moore</name>
   <email>root@blm.io</email>
 </author>

 
 <entry>
   <title>Hollywood action heroes</title>
   <link href="http://blmoore.github.io/blog/movies/2014/06/07/hollywood-action-heroes/"/>
   <updated>2014-06-07T00:00:00+01:00</updated>
   <id>http://blmoore.github.io/movies/2014/06/07/hollywood-action-heroes</id>
   <content type="html">&lt;div style=&quot;float:right;width: 20%&quot;&gt;
&lt;img src=&quot;/blog/img/arnie10.jpg&quot; width=80% style=&quot;border:2px solid #cccccc; display:block; margin-right: auto; margin-left: auto;&quot;/&gt;
&lt;figcaption&gt;
&lt;p style=&quot;font-size:smaller&quot;&gt;Arnie 2010 (&lt;a href=&quot;https://commons.wikimedia.org/wiki/File:SchwarzeneggerJan2010.jpg&quot; target=&quot;_blank&quot;&gt;source&lt;/a&gt;)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/div&gt;

&lt;p&gt;
I recently read &lt;a href=&quot;http://www.amazon.com/gp/product/1451662440/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1451662440&amp;linkCode=as2&amp;tag=blmio-20&amp;linkId=H7MGQFNQ3X6N6UJK&quot;&gt;Arnie&#39;s autobiography&lt;/a&gt;
(great fun) and in it he writes about the various roles he&#39;s
had, discussing those movies that flopped or were surprise box office successes,
but it&#39;s hard to build up an overall picture of his career from these fragments.
Similarly the raw filmography lists at &lt;a href=&quot;http://www.imdb.com/name/nm0000216/?ref_=nv_sr_1&quot; target=&quot;_blank&quot;&gt;IMDb&lt;/a&gt;
and &lt;a href=&quot;https://en.wikipedia.org/wiki/Arnold_Schwarzenegger#Filmography&quot; target=&quot;_blank&quot;&gt;Wikipedia&lt;/a&gt;
are pretty uninspiring.
&lt;/p&gt;

&lt;p&gt;
That gave me the idea of charting his movie career over time, attempting to
show a lot of information at once about how well the film did at box office
relative to its budget, and at what points these successes and failures
happened over the last few decades. After some
&lt;a href=&quot;http://imdbpy.sourceforge.net/&quot; target=&quot;_blank&quot;&gt;python-powered&lt;/a&gt;
scraping of IMDb data, this is what I came up with:
&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/blog/img/arnie.png&quot;&gt;&lt;img src=&quot;/blog/img/arnie_thumb.png&quot; width=100% /&gt;&lt;/a&gt;
&lt;p&gt;
It&amp;#39;s interesting to see the trajectory from back-to-back hits in low
budget action films (Terminator, Predator, Commando) to a peak of a $200 million
budget for &lt;a href=&quot;https://en.wikipedia.org/wiki/Terminator_3:_Rise_of_the_Machines&quot; target=&quot;_blank&quot;&gt;Terminator 3&lt;/a&gt;
(considerably more in 2014 dollars, after adjusting for
inflation). Of course you can then see his stretch as Governor of California
from 2003-11, punctuated only by a &lt;a href=&quot;https://www.youtube.com/watch?v=hrMmiUSVRRI&quot; target=&quot;_blank&quot;&gt;memorable cameo&lt;/a&gt;
in The Expendables &lt;sup&gt;(and an excluded minor role in The Kid &amp;amp; I)&lt;/sup&gt;.
&lt;/p&gt;
&lt;p&gt;
The eagle-eyed will notice some films are missing, there&amp;#39;s no
&lt;a href=&quot;http://www.imdb.com/title/tt0065832/&quot; target=&quot;_blank&quot;&gt;Hercules in New York&lt;/a&gt;
and others of his earliest films. This is down to IMDb&amp;#39;s budget and gross listings
being woefully incomplete, but thankfully most of his famous lead roles are shown.
&lt;/p&gt;
&lt;p&gt;
These next obvious step was to look at other actors that fill a similar
niche; how does Sly Stallone compare? What about the more recent action
stars?
&lt;/p&gt;&lt;/p&gt;

&lt;div class=&quot;gallery&quot;&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/sly.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/sly_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Sylvester Stallone&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/bruce.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/bruce_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Bruce Willis&lt;/h5&gt;
&lt;/figcaption&gt;  &lt;/a&gt;
&lt;/figure&gt;

&lt;br clear=&quot;all&quot; /&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/li.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/li_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Jet Li&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/chan.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/chan_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Jackie Chan&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;br clear=&quot;all&quot; /&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/statham.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/statham_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Jason Statham&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/vin.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/vin_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Vin Diesel&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;br clear=&quot;all&quot; /&gt;

&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/seagal.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/seagal_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Steven Seagal&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;


&lt;figure class=&quot;gallery-item&quot;&gt;
&lt;a href=&quot;/blog/img/rock.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/rock_thumb.png&quot;&gt;
&lt;figcaption class=&quot;img-title&quot;&gt;
&lt;h5&gt;Dwayne Johnson&lt;/h5&gt;
&lt;/figcaption&gt;
&lt;/a&gt;
&lt;/figure&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;/blog/img/clint.png&quot; target=&quot;_blank&quot;&gt;
&lt;img src=&quot;/blog/img/clint_bigthumb.png&quot; width=100%&gt;
&lt;/a&gt;
&lt;p&gt;
So we&amp;#39;ve learnt that &lt;a href=&quot;http://www.imdb.com/name/nm0000246&quot; target=&quot;_blank&quot;&gt;Bruce Willis&lt;/a&gt;
is in way too many films to label clearly, and Jackie Chan doesn&amp;#39;t seem to mind frenetically
jumping from big-money blockbusters and low-budget action flicks.
&lt;/p&gt;
&lt;p&gt;
&lt;div style=&quot;float:right;width: 50%&quot;&gt;
&lt;img src=&quot;/blog/img/roi.png&quot; width=95% style=&quot;border:2px solid #cccccc; display:block; margin-right: auto; margin-left: auto;&quot; /&gt;
&lt;figcaption&gt;
&lt;p style=&quot;font-size:smaller&quot;&gt;Fancy a gamble? Pick Sly or Jackie as your lead.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/div&gt;&lt;/p&gt;

&lt;p&gt;I can use this data to look at the mean expected return on investment (ROI)
per leading man, by just taking the mean gross over budget. This shows that
&lt;a href=&quot;http://www.imdb.com/name/nm0000329/&quot; target=&quot;_blank&quot;&gt;Jackie Chan&lt;/a&gt;,
albeit with a pretty huge amount of variance, has the highest expected ROI of the actors
listed here. At the other end of the scale is
&lt;a href=&quot;http://www.imdb.com/name/nm0005458/&quot; target=&quot;_blank&quot;&gt;Jason Statham&lt;/a&gt;, but in fairness I haven&amp;#39;t
normalised for the budgets of the films they&amp;#39;re starring in &amp;mdash; if you stick to
$100 million films it&amp;#39;s pretty much impossible to then multiple that by ten at the box office!
&lt;/p&gt;&lt;/p&gt;

&lt;h3&gt;All-time totals per actor&lt;/h3&gt;

&lt;p&gt;
Another (possibly fairer) way to compare these guys is by total budgets
and grosses over their careers. It&#39;s &lt;a href=&quot;http://www.imdb.com/help/show_leaf?infosource&quot; target=&quot;_blank&quot;&gt;not entirely clear&lt;/a&gt;
where IMDb gets these values from, so the absolute numbers should be taken with a pinch of salt.&lt;/p&gt;&lt;br /&gt;
&lt;div id=&#39;actionBudget&#39; class=&quot;rChart&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;/blog/js/action_budget.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Here&#39;s the same graph but by box office takings. These numbers from IMDb are even &lt;em&gt;more&lt;/em&gt;
suspect and vary according to different sources. Additionally, to convert the gross
to 2014 dollars I used a &lt;a href=&quot;https://en.wikipedia.org/wiki/Consumer_price_index&quot; target=&quot;_blank&quot;&gt;measure of inflation&lt;/a&gt;
from the year the film was released in &amp;mdash; to
calculate this more accurately you need a breakdown of the gross over time. Unlike lists at
&lt;a href=&quot;http://www.boxofficemojo.com/&quot; target=&quot;_blank&quot;&gt;Box Office Mojo&lt;/a&gt;, these charts do
sometimes contain cameo roles (e.g. Bruce and Arnie get Expendables I credits), and as I mentioned
with Arnie, there&#39;s unfortunately some missing or incomplete data on IMDb which has lead to some
films being excluded.
&lt;/p&gt;&lt;br /&gt;
&lt;div id=&#39;actionGross&#39; class=&quot;rChart&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;/blog/js/action_gross.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;
It turns out Sly has grossed more than Arnie on smaller budgets! We can also see
Jackie Chan punches well above his weight in terms of absolute earnings, as well as ROI.&lt;/p&gt;

&lt;p&gt;Finally here&#39;s budget plotted against gross for most of the individual films used in this analysis.&lt;/p&gt;

&lt;div id=&#39;actionBudgetVGross&#39; class=&quot;rChart&quot;&gt;&lt;/div&gt;

&lt;script src=&quot;/blog/js/action_budgetVgross.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The python and R scripts to recreate all the above analysis are
&lt;a href=&quot;https://github.com/blmoore/blogR&quot; target=&quot;_blank&quot;&gt;on github&lt;/a&gt;,
and it should be pretty straightforward to extend this over any other actors
or actresses you might be interested in (like, say, Jean-Claude Van Damme whom
  I completely forgot about).
  &lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Celebrity twitter followers by gender</title>
   <link href="http://blmoore.github.io/blog/twitter/2014/05/25/celebrity-twitter-followers-by-gender/"/>
   <updated>2014-05-25T00:00:00+01:00</updated>
   <id>http://blmoore.github.io/twitter/2014/05/25/celebrity-twitter-followers-by-gender</id>
   <content type="html">&lt;p&gt;The most popular accounts on twitter have millions of followers, but what are their demographics like? Twitter doesn&#39;t collect or release this kind of information, and even things like name and location are only voluntarily added to people&#39;s profiles. Unlike Google+ and Facebook, twitter has no real name policy, &lt;a href=&quot;https://gigaom.com/2011/09/16/why-twitter-doesnt-care-what-your-real-name-is/&quot; target=&quot;_blank&quot;&gt;they don&#39;t care&lt;/a&gt; what you call yourself, because they can still divine out useful information from your account activity.&lt;/p&gt;

&lt;p&gt;For example, you can optionally set your location on your twitter profile. Should you choose not to, twitter can still just &lt;a title=&quot;geolocation&quot; href=&quot;https://en.wikipedia.org/wiki/Geolocation&quot; target=&quot;_blank&quot;&gt;geolocate&lt;/a&gt; your IP. If you use an anonymiser or VPN, they could use the timing of your account activity to infer a timezone. This could then be refined to a city or town using the topics you tweet about and the locations of friends and services you mention most.&lt;/p&gt;

&lt;p&gt;I chose to look at one small aspect of demographics: gender, and used a cheap heuristic based on stated first name to estimate the male:female ratios in a sample of followers from these very popular accounts.&lt;/p&gt;

&lt;h2&gt;Top 100 twitter accounts by followers&lt;/h2&gt;

&lt;p&gt;A top 100 list is made available by &lt;a title=&quot;Twitter Counter&quot; href=&quot;http://twittercounter.com/pages/100&quot; target=&quot;_blank&quot;&gt;Twitter Counter&lt;/a&gt;. It&#39;s not clear that they have made this list available through their API, but thanks to the markup, a quick hack is to scrape the usernames using &lt;a title=&quot;RCurl&quot; href=&quot;http://www.omegahat.org/RCurl/&quot; target=&quot;_blank&quot;&gt;RCurl&lt;/a&gt; and some &lt;a title=&quot;Regex&quot; href=&quot;https://en.wikipedia.org/wiki/Regular_expression&quot; target=&quot;_blank&quot;&gt;regex&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;require&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;RCurl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
top.100 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; getURL&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://twittercounter.com/pages/100&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# split into lines&lt;/span&gt;
top.100 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; unlist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;strsplit&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;top.100&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Get only those lines with an @&lt;/span&gt;
top.100 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; top.100&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;sapply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;top.100&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; grepl&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; pattern&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;@&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Grep out anchored usernames: &amp;lt;a ...&amp;amp;gt;&amp;lt;a href=&amp;#39;https://github.com/username&amp;#39; class=&amp;#39;user-mention&amp;#39;&amp;gt;@username&amp;lt;/a&amp;gt;&amp;lt;/a&amp;gt;;&lt;/span&gt;
top.100 &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; gsub&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;.*&amp;gt;@(.+)&amp;lt;.*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\\1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; top.100&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;101&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;top.100&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# [1] &amp;quot;katyperry&amp;quot;  &amp;quot;justinbieber&amp;quot;  &amp;quot;BarackObama&amp;quot;  ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;R package twitteR&lt;/h2&gt;

&lt;p&gt;Getting data from the &lt;a title=&quot;twitter API&quot; href=&quot;https://dev.twitter.com/&quot; target=&quot;_blank&quot;&gt;twitter API&lt;/a&gt; is made simple by the twitteR package. I made use of &lt;a title=&quot;twitteR&quot; href=&quot;http://davetang.org/muse/2013/04/06/using-the-r_twitter-package/&quot; target=&quot;_blank&quot;&gt;Dave Tang&#39;s worked example&lt;/a&gt; for the initial OAuth setup, once that&#39;s complete the twitteR package is really easy to use.&lt;/p&gt;

&lt;p&gt;The difficulty getting data from the API, as ever, is to do with &lt;a title=&quot;rate limits&quot; href=&quot;https://dev.twitter.com/docs/rate-limiting/1.1&quot; target=&quot;_blank&quot;&gt;rate limits&lt;/a&gt;. Twitter allows 15 requests for follower information per 15 minute window. (Number of followers can be queried by a much more generous 180 requests per window.) This means that to get a sample of followers for each of the top 100 twitter accounts, it&#39;ll take &lt;em&gt;at a minimum&lt;/em&gt; 1 hour 40 mins to stay on the right side of the rate limit. I ended up using 90 second sleep windows between requests to be safe, making a total query time of two and a half hours!&lt;/p&gt;

&lt;p&gt;Another issue is possibly to do with strange characters being returned and breaking the JSON import. This error crops up a lot and meant that I had to lower the sample size of followers to avoid including these problem accounts. After some highly unscientific tests, I settled on about 1000 followers per account which seemed a good trade-off between maximising sample size but minimising failure rate.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Try to sample 3000 followers for a user:&lt;/span&gt;
username&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;getFollowers&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Error in twFromJSON(out) :&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#  Error: Malformed response from server, was not JSON.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# The most likely cause of this error is Twitter returning&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# a character which can&amp;#39;t be properly parsed by R. Generally&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# the only remedy is to wait long enough for the offending&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# character to disappear from searches.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Gender inference&lt;/h2&gt;

&lt;p&gt;Here I used a relatively new R package, &lt;a title=&quot;gender package&quot; href=&quot;https://github.com/ropensci/gender&quot; target=&quot;_blank&quot;&gt;rOpenSci&#39;s gender&lt;/a&gt; (kudos for resisting gendR and the like). This uses U.S. social security data to probabilistically link first names with genders, e.g.:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;devtools&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;install_github&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ropensci/gender&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
require&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;gender&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
gender&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ben&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   name proportion_male proportion_female gender&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1  ben          0.9962            0.0038   male&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So chances are good that I&#39;m male. But the package also returns proportional data based on the frequency of appearances in the SSA database. Naively these can be interpreted as the probability a given name is either male or female. So in terms of converting a list of 1000 first names to genders, there are a few options:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Threshold&lt;/strong&gt;: if  &amp;gt;.98 male or female, assign gender, else ignore.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Probabilistically&lt;/strong&gt;: use random number generation to assign each case, if a name is .95 male and .05 female, on average assign that name to females 5% of the time.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bayesian-ish&lt;/strong&gt;: threshold for almost certain genders (e.g. .99+) and use this as a prior belief of gender ratios when assigning gender to the other followers for a given user. This would probably lower bias when working with heavily skewed accounts.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I went with #2 here. Anecdotal evidence suggests it&#39;s reasonably accurate anyway, with twitter analytics (using bag of words, sentiment analysis and all sorts of clever tricks to unearth gender) estimating my account has 83% male followers (!), with probabilistic first name assignment estimating 79% (and that&#39;s with a smaller sample). Method #3 may correct this further but the implementation tripped me up.&lt;/p&gt;

&lt;h2&gt;Results&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/twittergenderdist.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/twittergenderdist.png&quot; alt=&quot;Celebrity twitter followers by gender&quot; width=&quot;500&quot; height=&quot;833&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So boys prefer football (soccer) and girls prefer One Direction, who knew? Interestingly Barack Obama appears to have a more male following (59%), as does Bill Gates with 67%.&lt;/p&gt;

&lt;p&gt;At the other end of the spectrum, below One Direction, Simon Cowell is a hit with predominantly female twitter users (70%), as is Kanye West (67%) and Khloe Kardashian (72%).&lt;/p&gt;

&lt;p&gt;Another surprise is that Justin Bieber, famed as teen girl heartthrob, actually has a more broad gender appeal with 41 / 59 male-female split.&lt;/p&gt;

&lt;h2&gt;Interactive charts&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://blm.io/twitter&quot;&gt;&lt;img class=&quot;imgright&quot; src=&quot;/blog/img/screen-shot-2014-05-25-at-11-51-25.png&quot; alt=&quot;Click for an interactive version.&quot; width=&quot;150&quot; height=&quot;86&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Using the fantastic &lt;a title=&quot;rcharts&quot; href=&quot;http://rcharts.io/&quot; target=&quot;_blank&quot;&gt;rCharts&lt;/a&gt; library, I&#39;ve put together some &lt;a title=&quot;interactive charts&quot; href=&quot;http://blm.io/twitter&quot; target=&quot;_blank&quot;&gt;interactive graphics&lt;/a&gt; that let you explore the above results further. These use the &lt;a title=&quot;NVD3&quot; href=&quot;http://nvd3.org/&quot; target=&quot;_blank&quot;&gt;NVD3 graphing library&lt;/a&gt;, as opposed to my &lt;a href=&quot;http://rcharts.io/viewer/?6c9ed5eed37fe3c03fa5&quot; target=&quot;_blank&quot;&gt;previous effort&lt;/a&gt; which used &lt;a href=&quot;http://dimplejs.org/&quot; target=&quot;_blank&quot;&gt;dimple.js&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The first of these is ordered by number of followers, and the second by gender split. The eagle-eyed among you will see that one account from the top 100 is missing from all these charts due to the JSON error I discuss above, thankfully it&#39;s a boring one (sorry &lt;a href=&quot;https://twitter.com/TwitPic&quot; target=&quot;_blank&quot;&gt;&lt;a href=&#39;https://github.com/TwitPic&#39; class=&#39;user-mention&#39;&gt;@TwitPic&lt;/a&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Where would your account be on these graphs? Somehow I end up alongside Wayne Rooney in terms of gender diversity :s&lt;/p&gt;

&lt;h3&gt;Caveats&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;A lot of the time genders can&#39;t be called from an account&#39;s first name. Maybe they haven&#39;t given a first name, maybe it&#39;s a business account or some pretty unicode symbols, maybe it&#39;s a spammy egg account. This means my realised sample size is &lt;&lt;1000, sometimes the majority of usernames had no gender (e.g. &lt;a href=&quot;https://twitter.com/UberSoc&quot; target=&quot;_blank&quot;&gt;&lt;a href=&#39;https://github.com/UberSoc&#39; class=&#39;user-mention&#39;&gt;@UberSoc&lt;/a&gt;&lt;/a&gt;, fake followers?).
&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/with_missing.png&quot;&gt;&lt;img class=&quot;imgright&quot; src=&quot;/blog/img/with_missing.png&quot; alt=&quot;This (big) chart includes % for those that couldn&#39;t be assigned (NA)&quot; width=&quot;107&quot; height=&quot;150&quot; /&gt;&lt;/a&gt; This (big) chart includes % for those that couldn&#39;t be assigned (NA)&lt;/li&gt;
&lt;li&gt;The SSA data is heavily biased towards Western (esp. US) and non-English names are likely to not be assigned a gender throughout. This is a shame, if you know of a more international gender DB please let me know.&lt;/li&gt;
&lt;li&gt;I&#39;m sampling most recent followers, so maybe accounts like Justin Bieber have a much higher female ratio in earlier followers than those which have only just hit the follow button.&lt;/li&gt;
&lt;li&gt;The sample size of 1000 followers per account is smaller than I&#39;d like, especially for accounts with 50 million followers.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you have other ideas of what to do with demographics data, or have noticed additional caveats of this study, please let me know in the comments!&lt;/p&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align:right;&quot;&gt;Full code to reproduce this analysis is &lt;a title=&quot;Code to reproduce&quot; href=&quot;https://github.com/blmoore/blogR/blob/master/R/twitter_followersGender.R&quot; target=&quot;_blank&quot;&gt;available on Github&lt;/a&gt;.&lt;br /&gt;
This post was originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/05/25/celebrity-twitter-followers-by-gender/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>What are the most overrated films?</title>
   <link href="http://blmoore.github.io/blog/movies/2014/05/05/what-are-the-most-overrated-films/"/>
   <updated>2014-05-05T00:00:00+01:00</updated>
   <id>http://blmoore.github.io/movies/2014/05/05/what-are-the-most-overrated-films</id>
   <content type="html">&lt;p style=&quot;text-align:left;&quot;&gt;&quot;Overrated&quot; and &quot;underrated&quot; are slippery terms to try to quantify. An interesting way of looking at this, I thought, would be to compare the reviews of film critics with those of Joe Public, reasoning that a film which is roundly-lauded by the Hollywood press but proved disappointing for the real audience would be &quot;overrated&quot; and &lt;em&gt;vice versa&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;To get some data for this I turned to the most prominent review aggregator: &lt;a title=&quot;Rotten Tomatoes&quot; href=&quot;http://www.rottentomatoes.com/&quot; target=&quot;_blank&quot;&gt;Rotten Tomatoes&lt;/a&gt;. All this analysis was done in the R programming language, and full code to reproduce it will be attached at the end.&lt;/p&gt;

&lt;h2&gt;Rotten Tomatoes API&lt;/h2&gt;

&lt;p&gt;&lt;a title=&quot;Rotten Tomatoes API&quot; href=&quot;http://developer.rottentomatoes.com/docs/read/JSON&quot; target=&quot;_blank&quot;&gt;This API&lt;/a&gt; is nicely documented, easy to access and permissive with rate limits, as well as being &lt;em&gt;cripplingly&lt;/em&gt; restrictive in what data is presents. Want a list of all films in the database? Nope. Most reviewed? Top rated? Highest box-office takings? Nope.&lt;/p&gt;

&lt;p&gt;The related forum is full of what seem like simple requests that should be available through the API but aren&#39;t: &lt;a title=&quot;Top 100 lists requests&quot; href=&quot;http://developer.rottentomatoes.com/forum/read/157176&quot; target=&quot;_blank&quot;&gt;top 100 lists?&lt;/a&gt; Search using &lt;a title=&quot;multiple IDs&quot; href=&quot;http://developer.rottentomatoes.com/forum/read/112962&quot; target=&quot;_blank&quot;&gt;mulitple IDs at once&lt;/a&gt;? Get &lt;a title=&quot;audience reviews&quot; href=&quot;http://developer.rottentomatoes.com/forum/read/112070&quot; target=&quot;_blank&quot;&gt;audience reviews&lt;/a&gt;? All are unanswered or not currently implemented.&lt;/p&gt;

&lt;p&gt;So the starting point (a big list of films) is actually kinda hard to get at. The Rube Golbergian method I eventually used was this:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Get the &quot;Top Rentals&quot; list of movie details (max: 50)&lt;/li&gt;
&lt;li&gt;Search each one for &quot;Similar films&quot; (max: 5)&lt;/li&gt;
&lt;li&gt;Get the unique film IDs from step 2 and iterate&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;(&lt;strong&gt;N.B.&lt;/strong&gt; This wasn&#39;t my idea but one from a post in the API forums, unfortunately didn&#39;t save the link.)&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;imgright&quot; src=&quot;/blog/img/rottentomatohits.png&quot; alt=&quot;Films returned&quot; width=&quot;300&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In theory this grows your set of films at a reasonable pace, but in reality the number of unique films being returned was significantly lower (&lt;em&gt;shown right&lt;/em&gt;). I guess this was due to pulling in &quot;&lt;a title=&quot;Walled garden wikipedia&quot; href=&quot;https://en.wikipedia.org/wiki/Wikipedia:Walled_garden&quot; target=&quot;_blank&quot;&gt;walled gardens&lt;/a&gt;&quot; to my dataset, e.g. if a Harry Potter film was hit, each further round would pull in the 5 other films as most similar.&lt;/p&gt;

&lt;h2&gt;Results&lt;/h2&gt;

&lt;p&gt;Here&#39;s an overview of the critic and audience scores I collected through the Rotten Tomatoes API, with some outliers labelled.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/rt_plot.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/rt_plot.png&quot; alt=&quot;Most over- and underrated films&quot; width=&quot;500&quot; height=&quot;533&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On the whole it should be noted that critics and audience agree most of the time, as shown by the Pearson correlation coefficient between the two scores (0.71 across &amp;gt;1200 films).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blm.io/movies&quot;&gt;&lt;img class=&quot;imgright&quot; src=&quot;/blog/img/screen-shot-2014-05-08-at-02-11-47.png&quot; alt=&quot;&quot; width=&quot;187&quot; height=&quot;176&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;Update:&lt;/h3&gt;

&lt;p&gt;I&#39;ve put together an interactive version of the same plot &lt;a href=&quot;http://blm.io/movies&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; using the &lt;a title=&quot;rCharts&quot; href=&quot;https://github.com/ramnathv/rCharts&quot; target=&quot;_blank&quot;&gt;rCharts&lt;/a&gt; R package. It&#39;ll show film title and review scores when you hover over a point so you know what you&#39;re looking at. Also I&#39;ve more than doubled the size of the film dataset by repeating the above method for a couple more iterations — &lt;a title=&quot;rCharts&quot; href=&quot;http://blm.io/movies&quot; target=&quot;_blank&quot;&gt;take a look&lt;/a&gt;!&lt;/p&gt;

&lt;h2&gt;Most underrated films&lt;/h2&gt;

&lt;p&gt;Using our earlier definition it&#39;s easy to build a table of those films where the audience ending up really liking a film that was panned by critics.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/under_table.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/under_table.png&quot; alt=&quot;Scores are shown out of 100 for both aggregated critics and members of Rotten Tomatoes.&quot; width=&quot;500&quot; height=&quot;366&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Somewhat surprisingly, the top of the table is &lt;a title=&quot;Facing the Giants&quot; href=&quot;http://www.rottentomatoes.com/m/facing_the_giants/&quot; target=&quot;_blank&quot;&gt;Facing the Giants (2006)&lt;/a&gt;, an evangelical Christian film. I guess non-Christians might have stayed away, and presumably it struck a chord within its target demographic — but after watching &lt;a title=&quot;Facing the Giants&quot; href=&quot;https://www.youtube.com/watch?v=4xneiV7Ru6Q&quot; target=&quot;_blank&quot;&gt;the trailer&lt;/a&gt;, I&#39;d probably agree with the critics on this one.&lt;/p&gt;

&lt;p&gt;This showed that some weighting of the difference might be needed, at the very least weighting by number of reviews, but the Rotten Tomatoes API doesn&#39;t provide that data.&lt;/p&gt;

&lt;p&gt;In addition the Rotten Tomatoes &lt;a href=&quot;http://www.rottentomatoes.com/m/facing_the_giants/&quot; target=&quot;_blank&quot;&gt;page&lt;/a&gt; for the film, shows a &quot;want to see&quot; percentage, rather than an audience score. This came up a few times and I&#39;ve seen no explanation for it, presumably &quot;want to see&quot; rating is for unreleased films, but the API returns a separate (and undisclosed?) audience score for these films also.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/rt_films.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/rt_films.png&quot; alt=&quot;Above shows a &amp;quot;want to see&amp;quot; rating, different to the &amp;quot;liked it&amp;quot; rating returned by the API and shown below&quot; width=&quot;500&quot; height=&quot;355&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Above shows a &amp;quot;want to see&amp;quot; rating, different to the &amp;quot;liked it&amp;quot; rating returned by the API and shown below. Note: these screenshots from RottenTomatoes.com are not CC licensed and is shown here under a claim of Fair Use, reproduced for comment/criticism.&lt;/p&gt;

&lt;p&gt;Looking over the rest of the table, it seems the public is more fond of gross-out or slapstick comedies (such as &lt;a href=&quot;http://www.rottentomatoes.com/m/diary_of_a_mad_black_woman/&quot; target=&quot;_blank&quot;&gt;Diary of a Mad Black Woman (2005)&lt;/a&gt;, &lt;a href=&quot;http://www.rottentomatoes.com/m/grandmas_boy/&quot; target=&quot;_blank&quot;&gt;Grandma&#39;s boy (2006)&lt;/a&gt;) than the critics. Again, not films I&#39;d jump to defend as underrated. Bad Boys II however...&lt;/p&gt;

&lt;h2&gt;Most overrated films&lt;/h2&gt;

&lt;p&gt;Here we&#39;re looking at those films which the critics loved, but paying audiences were then less enthused.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/05/over_table.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/over_table.png&quot; alt=&quot;As before, scores are out of 100 and they&#39;re ranked by difference between audience and critic scores.&quot; width=&quot;500&quot; height=&quot;400&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Strangely the top 15 (by difference) contains both the original 2001 &lt;a title=&quot;Spy Kids&quot; href=&quot;http://www.rottentomatoes.com/m/spy_kids/&quot; target=&quot;_blank&quot;&gt;Spy Kids&lt;/a&gt; and the sequel &lt;a title=&quot;Spy Kids 2&quot; href=&quot;http://www.rottentomatoes.com/m/spy_kids_2_island_of_lost_dreams/&quot; target=&quot;_blank&quot;&gt;Spy Kids 2&lt;/a&gt;: The Island of Lost Dreams (2002). What did critics see in these films that the public didn&#39;t? A possibility is bias in the audience reviews collected, the target audience is young children for these films and they probably are underrepresented amongst Rotten Tomatoes reviewers. Maybe there&#39;s even an enrichment for disgruntled parent chaperones.&lt;/p&gt;

&lt;p&gt;Thankfully, though, in this table there&#39;s the type of film we might more associate with being &quot;overrated&quot; by critics. &lt;a title=&quot;Momma&#39;s Man&quot; href=&quot;http://www.rottentomatoes.com/m/10009419-mommas_man/&quot; target=&quot;_blank&quot;&gt;Momma&#39;s Man&lt;/a&gt; (2008) is an indie drama debuted at the 26th Torino Film Festival. &lt;a title=&quot;Essential Killing&quot; href=&quot;http://www.rottentomatoes.com/m/essential_killing/&quot; target=&quot;_blank&quot;&gt;Essential Killing&lt;/a&gt; is a 2010 drama and political thriller from Polish director and screenwriter &lt;span style=&quot;color:#333333;&quot;&gt;Jerzy Skolimowski. &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;There&#39;s also a smattering of Rom-Coms (&lt;a title=&quot;Friends with Money&quot; href=&quot;http://www.rottentomatoes.com/m/friends_with_money/&quot; target=&quot;_blank&quot;&gt;Friends with Money&lt;/a&gt; (2006), &lt;a title=&quot;Splash&quot; href=&quot;http://www.rottentomatoes.com/m/1019641-splash/&quot; target=&quot;_blank&quot;&gt;Splash&lt;/a&gt; (1984)) — if the API returned genre information it would be interesting to look for overall trends but, alas. Additional interesting variables to consider might be budget, the lead, reviews of producer&#39;s previous films... There&#39;s a lot of scope for interesting analysis here but it&#39;s currently just not possible with the Rotten Tomatoes API.&lt;/p&gt;

&lt;h3&gt; Caveats / Extensions&lt;/h3&gt;

&lt;p&gt;The full code will be posted below, so if you want to do a better job with this analysis, please do so and send me a link! :)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Difference is too simple a metric. A better measure might be weighted by (e.g.) critic ranking. A film critics give 95% but audiences 75% might be more interesting than the same points difference between a 60/40 rated film.&lt;/li&gt;
&lt;li&gt;There&#39;s something akin to a &quot;founder effect&quot; of my initial chosen films that makes it had to diversify the dataset, especially to films from previous decades and classics.&lt;/li&gt;
&lt;li&gt;The Rotten Tomatoes API provides an IMDB id for cross-referencing, maybe that&#39;s a path to getting more data and building a better film list.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align:right; font-size: .85rem;&quot;&gt;Full code to reproduce analysis is available in &lt;a href=&quot;https://gist.github.com/blmoore/dc3bfa9a3ad0857ac796&quot; target=&quot;_blank&quot;&gt;gist&lt;/a&gt; form. &lt;br /&gt;
This post was originally published on my &lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/05/05/what-are-the-most-overrated-films/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Author inflation in academic literature</title>
   <link href="http://blmoore.github.io/blog/academia/2014/04/06/author-inflation-in-academic-literature/"/>
   <updated>2014-04-06T00:00:00+01:00</updated>
   <id>http://blmoore.github.io/academia/2014/04/06/author-inflation-in-academic-literature</id>
   <content type="html">&lt;p&gt;There seems to be a general consensus that author lists in academic articles are growing. Wikipedia &lt;a href=&quot;https://en.wikipedia.org/wiki/Academic_authorship#Growing_number_of_authors_per_paper&quot; target=&quot;_blank&quot;&gt;says so&lt;/a&gt;, and I&#39;ve also come across a &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1002/asi.21438/abstract&quot; target=&quot;_blank&quot;&gt;published letter&lt;/a&gt; and short &lt;a href=&quot;http://www.nature.com/nature/history/full/nature06243.html&quot; target=&quot;_blank&quot;&gt;Nature article&lt;/a&gt; which accept this is the case and discuss ways of mitigating the issue. Recently there was an interesting discussion on &lt;a href=&quot;http://academia.stackexchange.com/questions/16759/is-there-an-inflation-in-the-number-of-authors-per-paper&quot; target=&quot;_blank&quot;&gt;academia.stackexchange&lt;/a&gt; on the subject but again without much quantification. Luckily given the array of literature database APIs and language bindings available, it should be pretty easy to investigate with some statistical analysis in R.&lt;/p&gt;

&lt;h2&gt;rplos&lt;/h2&gt;

&lt;p&gt;&lt;a title=&quot;ropensci&quot; href=&quot;http://ropensci.org/&quot; target=&quot;_blank&quot;&gt;ROpenSci&lt;/a&gt; offers nice R language bindings for the PLOS (I&#39;m more used to PLoS but I&#39;ll go with it) API, called &lt;a title=&quot;rplos&quot; href=&quot;https://github.com/ropensci/rplos&quot; target=&quot;_blank&quot;&gt;rplos&lt;/a&gt;. There&#39;s no particular reason to limit the search to PLOS journals but rplos seems significantly more straightforward to work with than pubmed API packages I&#39;ve used in the past like &lt;a title=&quot;RISmed&quot; href=&quot;http://cran.r-project.org/web/packages/RISmed/index.html&quot; target=&quot;_blank&quot;&gt;RISmed&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Additionally the PLOS group contains two journals of particular interest to me:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a title=&quot;plos comp biol&quot; href=&quot;http://www.ploscompbiol.org/&quot; target=&quot;_blank&quot;&gt;PLOS Computational Biology&lt;/a&gt; — a respectable specialist journal in my field; have bioinformatics articles been particularly susceptible to author inflation?&lt;/li&gt;
&lt;li&gt;&lt;a title=&quot;PLOS ONE&quot; href=&quot;http://www.plosone.org/&quot; target=&quot;_blank&quot;&gt;PLOS ONE&lt;/a&gt; — the original mega-journal. I wonder if the huge number of articles published here show different trends in authorship over time.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The only strange part of the search was at the PLOS API end. To search by the &lt;code&gt;publication_year&lt;/code&gt; field you need to supply both a beginning and end date range, in the form:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;publication_date&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2001-01-01&lt;/span&gt;T00&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;00&lt;/span&gt;Z TO &lt;span class=&quot;m&quot;&gt;2013-12-31&lt;/span&gt;T23&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;59&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;59&lt;/span&gt;Z&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A tad verbose, right? I can&#39;t imagine wanting to search for things published at a particular time of day. A full PLOS API query using the rplos package looks something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;searchplos&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Query: publication date in 2012&lt;/span&gt;
  q  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;publication_date:[2012-01-01T00:00:00Z TO 2012-12-31T23:59:59Z]&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Fields to return: id (doi) and author list&lt;/span&gt;
  fl &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;id,author&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Filter: only actual articles in journal PLOS ONE&lt;/span&gt;
  fq &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;doc_type:full&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&amp;quot;cross_published_journal_key:PLoSONE&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# 500 results (max 1000 per query)&lt;/span&gt;
  start&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; limit&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sleep&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A downside of using the PLOS API is that the set of journals are quite recent, PLOS ONE started in 2006 and PLOS Biology was only a few years before in 2003, so it&#39;ll only give us a limited window into any long-term trends.&lt;/p&gt;

&lt;h2&gt;Distribution of author counts&lt;/h2&gt;

&lt;p&gt;Before looking at inflation we can compare the distribution of author counts per paper between the journals:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/beans_overall.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/beans_overall.png&quot; alt=&quot;Distribution of author counts&quot; width=&quot;500&quot; height=&quot;500&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/journal_ecdf.png&quot;&gt;&lt;img class=&quot;imgright&quot; src=&quot;/blog/img/journal_ecdf.png&quot; alt=&quot;ECDF per journal&quot; width=&quot;300&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Possibly more usefully — but less pretty — the same data be plotted as empirical cumulative distribution functions (ECDF). From these we can see that PLOS Biology had the highest proportion of single-author papers in my sample (n = ~22,500 articles overall) followed by PLOS Medicine, with PLOS Genetics showing more high-author papers at the long-tail of the distribution, including the paper with the most authors in the sample (&lt;a title=&quot;couch&quot; href=&quot;http://www.plosgenetics.org/article/info%3Adoi%2F10.1371%2Fjournal.pgen.1003212&quot; target=&quot;_blank&quot;&gt;Couch et al., 2013&lt;/a&gt; with 270 authors).&lt;/p&gt;

&lt;h2&gt;Author inflation&lt;/h2&gt;
&lt;p&gt;So, in these 6 different journals published by PLOS, how has the mean number of authors per paper varied across the past 7 years?&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/alltrends.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/alltrends.png&quot; alt=&quot;PLOS author inflation&quot; width=&quot;500&quot; height=&quot;500&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Above I&#39;ve shown yearly means plus their 95% confidence intervals, as estimated by a non-parametric bootstrap method implemented in &lt;a title=&quot;ggplot2&quot; href=&quot;http://ggplot2.org/&quot; target=&quot;_blank&quot;&gt;ggplot2&lt;/a&gt;. Generally from this graph it does look like there&#39;s a slight upward trend on average, though arguably the mean is not the best summary statistic to use for this data, which I&#39;ve shown is not normally distributed, and may better fit an extreme value distribution.&lt;/p&gt;
&lt;p&gt;The relationship between publication date and number of authors per paper become clearer if it&#39;s broken down by journal:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/plot_lm.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/plot_lm.png&quot; alt=&quot;Author inflation regression&quot; width=&quot;500&quot; height=&quot;352&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here linear regression reveals a significant positive coefficient for year against mean author count per paper, as high as .52 extra authors per year on average, down to just .06 a year for PLOS ONE. Surprisingly the mega-journal which published around 80,000 papers over this time period seems least susceptible to author inflation.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/authinflation_bars.png&quot;&gt;&lt;img class=&quot;imgleft&quot; src=&quot;/blog/img/authinflation_bars.png&quot; alt=&quot;Author inflation per journal&quot; width=&quot;214&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;The explained variance in mean number of authors per paper (per year) ranges from .28 (PLOS ONE) up to an impressive .87 for PLOS Medicine, with PLOS Computational Biology not far behind on .83. However, PLOS Computational Biology had the second lowest regression coefficient, and the lowest average number of authors of the six journals — maybe us introverted computer types should be collaborating more widely!&lt;/p&gt;

&lt;h2&gt;Journal effects&lt;/h2&gt;
&lt;p&gt;It&#39;s interesting to speculate on what drives the observed differences in author inflation between journals. A possible covariate is the roundly-condemned &quot;Impact Factor&quot; journal-level metric — are &quot;high impact&quot; journals seeing more author creep than lesser publications?&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/04/corr_authif.png&quot;&gt;&lt;img class=&quot;imgfull&quot; src=&quot;/blog/img/corr_authif.png&quot; alt=&quot;Correlation of author inflation and impact factor&quot; width=&quot;300&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If estimate of author inflation is plotted against respective journals&#39; recent impact factors, there does indeed appear to be a positive correlation. However, this comparison only has 6 data points so there&#39;s not enough evidence to reject the null hypothesis that there is no relationship between these two variables (p = 0.18).&lt;/p&gt;

&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;h4&gt;Is author inflation occurring?&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Yes&lt;/strong&gt;, it certainly appears to be on average.&lt;/p&gt;
&lt;h4&gt;Is it a problem?&lt;/h4&gt;
&lt;p&gt;I don&#39;t know, but I&#39;d lean towards probably not.&lt;/p&gt;
&lt;p&gt;The average trends could be reflecting the proliferation of &quot;&lt;a title=&quot;big science&quot; href=&quot;https://en.wikipedia.org/wiki/Big_Science&quot; target=&quot;_blank&quot;&gt;Big Science&lt;/a&gt;&quot; with huge collaborative consortiums like &lt;a title=&quot;ENCODE&quot; href=&quot;http://encodeproject.org/ENCODE/&quot; target=&quot;_blank&quot;&gt;ENCODE&lt;/a&gt; and &lt;a title=&quot;FANTOM&quot; href=&quot;http://fantom.gsc.riken.jp/&quot; target=&quot;_blank&quot;&gt;FANTOM&lt;/a&gt; (though the main papers of those examples were targeted to &lt;em&gt;Nature&lt;/em&gt;) and doesn&#39;t necessarily support a conclusion that Publish or Perish culture is forcing lots of token authorships and backhanders between scientists.&lt;/p&gt;
&lt;p&gt;Maybe instead (as the &lt;a href=&quot;http://academia.stackexchange.com/questions/16759/is-there-an-inflation-in-the-number-of-authors-per-paper&quot; target=&quot;_blank&quot;&gt;original discussion&lt;/a&gt; hypothesised), people that traditionally may not have been credited with authorship (bioinformaticians doing end-point analysis and lab technicians) are now getting recognised for their input more often, or conceivably advances in cloud computing, distributed data storage and video conferencing has better enabled larger collaborations between scientists across the globe!&lt;/p&gt;
&lt;p&gt;Either way, evidence for author inflation is not evidence of a problem &lt;em&gt;per se&lt;/em&gt; :)&lt;/p&gt;

&lt;h3&gt;Caveats&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Means used for regression — while we get a surprisingly high R&lt;sup&gt;2&lt;/sup&gt; for regression the mean number of authors per paper per year, the predictive power for individual papers unsurprisingly vanishes (R&lt;sup&gt;2&lt;/sup&gt; plummets to between .02 and 4.6 × 10&lt;sup&gt;-4&lt;/sup&gt; per journal — significant non-zero coefficients remain). Author inflation wouldn&#39;t be expected to exhibit consistent and pervasive effects in all papers, for example reviews, letters and opinion pieces presumably have consistently lower author counts than research articles and not all science can work in a collaborative, multi-author framework.&lt;/li&gt;
&lt;li&gt;Search limits — rplos returns a maximum of 1000 results at a time (but they can be returned sequentially using the &lt;code&gt;start&lt;/code&gt; and &lt;code&gt;limit&lt;/code&gt; parameters). They seem to be drawn in reverse order of time so the results here probably aren&#39;t fully representative of the year in some cases. This has also meant my sample is unevenly split between journals: PLoSBiology: 2487; PLoSCompBiol: 3403; PLoSGenetics: 4013; PLoSMedicine: 2094; PLoSONE: 7176; PLoSPathogens:3647; &lt;strong&gt;Total:&lt;/strong&gt; 22,460.&lt;/li&gt;
&lt;li&gt;Resolution — this could be done in a more fine-grained way, say with monthly bins. As mentioned above, for high-volume journals like PLOS ONE, the sample is likely coming from the end of the years from ~2010 onwards.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p style=&quot;text-align:right;&quot;&gt;The full code to reproduce this analysis is &lt;a href=&quot;https://gist.github.com/blmoore/9998523&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;.&lt;br /&gt;
This post was originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/04/06/author-inflation-in-academic-literature/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.
&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Guardian data blog — UK general election analysis in R</title>
   <link href="http://blmoore.github.io/blog/politics/2014/03/18/guardian-data-blog-uk-elections/"/>
   <updated>2014-03-18T00:00:00+00:00</updated>
   <id>http://blmoore.github.io/politics/2014/03/18/guardian-data-blog-uk-elections</id>
   <content type="html">&lt;p&gt;The Guardian newspaper has for a few years been running a &lt;a title=&quot;guardian data blog&quot; href=&quot;http://www.theguardian.com/data&quot; target=&quot;_blank&quot;&gt;data blog&lt;/a&gt; and has built up a massive repository of (often) well-curated datasets on a huge number of topics. They even have an &lt;a title=&quot;list of data sets made available by the guardian&quot; href=&quot;http://www.theguardian.com/news/datablog/interactive/2013/jan/14/all-our-datasets-index&quot; target=&quot;_blank&quot;&gt;indexed list&lt;/a&gt; of all data sets they&#39;ve put together or reused in their articles.&lt;/p&gt;

&lt;p&gt;It&#39;s a great repository of interesting data for exploratory analysis, and there&#39;s a low barrier to entry in terms of getting the data into a useful form. Here&#39;s an example using UK election polling data collected over the last thirty years.&lt;/p&gt;

&lt;h2&gt;ICM polling data&lt;/h2&gt;

&lt;p&gt;The Guardian and &lt;a title=&quot;ICM research&quot; href=&quot;http://www.icmresearch.com/&quot; target=&quot;_blank&quot;&gt;ICM research&lt;/a&gt; have conducted monthly polls on voting intentions since 1984, usually with a sample size of between 1,000 and 1,500 people. It&#39;s not made obvious how these polls are conducted (cold-calling?) but for what it&#39;s worth ICM is a member of the &lt;a title=&quot;British Polling Council Wikipedia page&quot; href=&quot;http://www.britishpollingcouncil.org/&quot; target=&quot;_blank&quot;&gt;British Polling Council&lt;/a&gt;, and so hopefully tries to monitor and correct for things like the &quot;&lt;a title=&quot;shy tory factor&quot; href=&quot;https://en.wikipedia.org/wiki/Shy_Tory_Factor&quot; target=&quot;_blank&quot;&gt;Shy Tory Factor&lt;/a&gt;&quot;—the observation that Conservative voters supposedly have (or had prior to &#39;92)  a greater tendency to conceal their voting intentions than Labour supporters.&lt;/p&gt;

&lt;h2&gt;Preprocessing&lt;/h2&gt;

&lt;p&gt;The data is made available from The Guardian as a &lt;code&gt;.csv&lt;/code&gt; file via Google spreadsheets &lt;a title=&quot;data&quot; href=&quot;https://docs.google.com/spreadsheet/ccc?key=0AonYZs4MzlZbcGhOdG0zTG1EWkVPOEY3OXRmOEIwZmc#gid=0&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; and requires minimal cleanup, cut the source information from the end of the file and you can open it up in R.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;sop &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read.csv&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;StateOfTheParties.csv&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; stringsAsFactors&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k-Variable&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## Data cleanup&lt;/span&gt;
sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; apply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; as.numeric&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gsub&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;%&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; as.Date&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;%d-%m-%Y&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sop&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Date&amp;quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# correct for some rounding errors leading to 101/99 %&lt;/span&gt;
sop&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;rsum &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; apply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sum&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
table&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sop&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;rsum&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; sop&lt;span class=&quot;p&quot;&gt;[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; sop&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;rsum
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then after &lt;code&gt;melt&lt;/code&gt;ing the data.frame down (full code at the end of the post), you can get a quick overview with &lt;code&gt;ggplot2&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/03/area_plot.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;UK general election overview 1984-2014&quot; src=&quot;/blog/img/area_plot.png&quot; width=&quot;503&quot; height=&quot;344&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Election breakdown&lt;/h2&gt;

&lt;p&gt;The area plot is a nice overview but not that useful quantitatively. Given that the dataset includes general election results as well as opinion polling, it&#39;s straightforward to split the above plot by this important factor. I also found it useful to convert absolute dates to be relative to the election they precede. R has an object class, &lt;code&gt;difftime&lt;/code&gt;, which makes this easy to accomplish and calling &lt;code&gt;as.numeric()&lt;/code&gt; on a difftime object converts it to raw number of days (handily accounting for things like leap years).&lt;/p&gt;

&lt;p&gt;These processing steps lead to a clearer graph with more obvious stories, such as the gradual and monotonic decline of support for Labour during the Blair years. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/03/splitbyelection_2.png&quot;&gt;&lt;img src=&quot;/blog/img/splitbyelection_2.png&quot; alt=&quot;UK general election data split by election period&quot; width=&quot;500&quot; height=&quot;382&quot; class=&quot;imgfull&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NB&lt;/strong&gt; Facet headers show the election year and result of the election with which the (preceding) points are plotted relative to.&lt;/p&gt;

&lt;h2&gt;Next election&#39;s result&lt;/h2&gt;

&lt;p&gt;I originally wanted to look at this data to get a feel for how things are looking before next year&#39;s (2015) general election, maybe even running some predictive models (obviously I&#39;m no &lt;a href=&quot;http://fivethirtyeight.com/&quot; title=&quot;fivethirtyeight&quot; target=&quot;_blank&quot;&gt;fivethirtyeight.com&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;However, graphing the trends of public support for the two main UK parties hints it&#39;s unlikely to be a fruitful endeavour at this point, and with the above graphs showing an ominous increasing support for &quot;other&quot; parties (not accidentally coloured &lt;a href=&quot;https://www.ukip.org/&quot; title=&quot;ukip&quot; target=&quot;_blank&quot;&gt;purple&lt;/a&gt;), it looks like with about 400 days to go the 2015 general election is still all to play for.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/03/lab_con.png&quot;&gt;&lt;img src=&quot;/blog/img/lab_con.png&quot; alt=&quot;lab_con&quot; width=&quot;500&quot; height=&quot;607&quot; class=&quot;imgfull&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align:right; font-size:.85rem;&quot;&gt;Reproduce and improve this analysis with help from
&lt;a href=&quot;https://gist.github.com/blmoore/9631779&quot; target=&quot;_blank&quot;&gt;this gist&lt;/a&gt;.&lt;br \&gt;
This post was originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/03/18/guardian-data-blog-uk-elections/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>What are the most common RNG seeds used in R scripts on Github?</title>
   <link href="http://blmoore.github.io/blog/r/2014/03/06/most-common-rng-seeds-r-github/"/>
   <updated>2014-03-06T00:00:00+00:00</updated>
   <id>http://blmoore.github.io/r/2014/03/06/most-common-rng-seeds-r-github</id>
   <content type="html">&lt;p&gt;In the R programming language, the random number generator (RNG) is seeded each session using the current time and process ID. Via the magic of the popular &lt;a href=&quot;https://en.wikipedia.org/wiki/Mersenne_twister&quot; target=&quot;_blank&quot;&gt;Mersenne Twister PRNG&lt;/a&gt;, the values stored in &lt;code&gt;.Random.seed&lt;/code&gt; are used sequentially each time &quot;randomness&quot; is invoked in a function. This means, of course, that the same function run in different R sessions can produce varying results, and in the case of modelling a system sensitive to initial conditions the observed differences could be huge. &lt;/p&gt;

&lt;p&gt;For this reason it&#39;s common to manually set the PRNG seed (using &lt;code&gt;set.seed()&lt;/code&gt; in R), thereby creating the same &lt;code&gt;.Random.seed&lt;/code&gt; vector which can be drawn from in your analysis to produce reproducible results. The actual value passed to this function is irrelevant for practical purposes &amp;mdash; for whatever reason I generally user the same number across projects (42) &amp;mdash; so this made me wonder: what values do the major R developers tend to pick?&lt;/p&gt;

&lt;h2&gt;To Github&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;http://developer.github.com/v3/&quot; title=&quot;github API&quot; target=&quot;_blank&quot;&gt;Github API&lt;/a&gt; is currently in a transitional period between versions 2 and 3 and has (annoyingly) limited code search results to specific users or organisations. This means to perform a code search programmatically, I&#39;ll need a list of R users.&lt;/p&gt;

&lt;h3&gt;Google BigQuery&lt;/h3&gt;

&lt;p&gt;One way of building a list is through &lt;a href=&quot;http://www.githubarchive.org/&quot; title=&quot;Github archive&quot; target=&quot;_blank&quot;&gt;Github archive&lt;/a&gt;. The dev (&lt;a href=&quot;http://www.igvita.com/&quot; title=&quot;Ilya Grigorik&quot; target=&quot;_blank&quot;&gt;Ilya Grigorik&lt;/a&gt;) has put up a public dataset with &lt;a href=&quot;https://developers.google.com/bigquery/&quot; title=&quot;BigQuery&quot; target=&quot;_blank&quot;&gt;Google BigQuery&lt;/a&gt;, which is a neat cloud-based platform for querying huge datasets. My SQL isn&#39;t all that, but the Google BigQuery interface is really functional (e.g. it autocompletes table fields) and makes it easy to get the data you&#39;re looking for.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/img/screen-shot-2014-03-06-at-12-21-52.png&quot; alt=&quot;Fishing for prolific R users via Google BigQuery.&quot; width=&quot;500&quot; height=&quot;499&quot; class=&quot;imgfull&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In this case I pulled out R code repositories ordered by repo pushes (as a heuristic for codebase size and activity, I guess) with their owner&#39;s username. It was this list of names I then used for the API query.&lt;/p&gt;

&lt;h3&gt;Github API&lt;/h3&gt;

&lt;p&gt;It looks like there&#39;s a decent &lt;a href=&quot;https://github.com/cscheid/rgithub&quot; title=&quot;R bindings&quot; target=&quot;_blank&quot;&gt;set of R bindings&lt;/a&gt; for the Github API, but it&#39;s not clear how they work with code search, so I opted for the messier option of calling curl through &lt;code&gt;system()&lt;/code&gt;. To build the command to search the API per user:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;getCMD &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  cmd &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; paste0&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;curl -H &amp;#39;Accept: application/vnd.github.v3.text-match+json Authorization: token &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    oauth&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;#39;     &amp;#39;https://api.github.com/search/code?q=set.seed+in:file+language:R+user:&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    user&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;amp;amp;page=1&amp;amp;amp;per_page=500&amp;#39; | grep &amp;#39;fragment&amp;#39; -&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cmd&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see this is pretty rough and ready, there may be a pagination issue if someone sets PRNG seeds everywhere but it&#39;ll do.&lt;/p&gt;

&lt;p&gt;You can then run the command and pull out the returned string matches for the query, in this case I searched for &quot;set.seed&quot; and then used Haldey Wickham&#39;s &lt;code&gt;stringr&lt;/code&gt; &lt;a href=&quot;http://cran.r-project.org/web/packages/stringr/index.html&quot; title=&quot;stringr&quot; target=&quot;_blank&quot;&gt;R package&lt;/a&gt; to regexp out the number (if any) passed to the function.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;getPRNGseeds &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  print&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  api.result &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; system&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;getCMD&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; intern&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k-Variable&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;is.null&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;attr&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;api.result&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;status&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    seeds &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; cbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        str_match&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;api.result&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;set\\.seed\\((\\d+)\\)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    Sys.sleep&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;seeds&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    cat&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot; failed&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cbind&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The Github API spits out JSON data (ignored and just grepped out in the above) so I looked into a couple of smarter ways of parsing it. Firstly there&#39;s the &lt;code&gt;jsonlite&lt;/code&gt; &lt;a href=&quot;https://github.com/jeroenooms/jsonlite#readme&quot; title=&quot;jsonlite&quot; target=&quot;_blank&quot;&gt;R package&lt;/a&gt; which offers the &lt;code&gt;fromJSON()&lt;/code&gt; function to import JSON data into what resembles a sometimes-hard-to-work-with nested R object. It seems like the Github API query results return too many nested layers to produce a useful object in this case. Another option is &lt;a href=&quot;http://stedolan.github.io/jq/&quot; title=&quot;jq&quot; target=&quot;_blank&quot;&gt;jq&lt;/a&gt;, a command-line program which has a neat syntax for dealing specifically with the JSON data structure &amp;mdash; I&#39;ll definitely be using it for more complex JSON wrangling in the future.&lt;/p&gt;

&lt;h2&gt;The data&lt;/h2&gt;

&lt;p&gt;Despite the harsh search limitations I ended up with 27 users who owned the top 100 R repositories, and of those 15 used &lt;code&gt;set.seed()&lt;/code&gt; somewhere (or at least something like it). However the regex fails in some cases &amp;mdash; where a variable is being passed to the function instead of an integer, for one. Long story short, I scraped together 187 lines of &lt;code&gt;set.seed(\d+)&lt;/code&gt; from some of the big names in the R community and here&#39;s how the counts looked:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/03/prng.png&quot;&gt;&lt;img src=&quot;/blog/img/prng.png&quot; alt=&quot;RNG seeds&quot; width=&quot;500&quot; height=&quot;833&quot; class=&quot;imgfull&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So plain old &lt;strong&gt;1&lt;/strong&gt; is the stand-out winner! &lt;/p&gt;

&lt;p&gt;There&#39;s a few sequences in there (&lt;strong&gt;123&lt;/strong&gt;, &lt;strong&gt;321&lt;/strong&gt;, &lt;strong&gt;1234&lt;/strong&gt;, &lt;strong&gt;12345&lt;/strong&gt;) and some date references (&lt;strong&gt;2011&lt;/strong&gt;, &lt;strong&gt;20051028&lt;/strong&gt;), but surprisingly few programmer in-jokes or web-culture references, save a lone &lt;strong&gt;1337&lt;/strong&gt; and I guess some binary. &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1410&lt;/strong&gt; (or &lt;strong&gt;1014&lt;/strong&gt; in less-sensible countries) and &lt;strong&gt;141079&lt;/strong&gt; look like they could be a certain R developer&#39;s birthday and birth year, but that&#39;s pure speculation :)&lt;/p&gt;

&lt;p&gt;Here&#39;s one of those awful wordle / wordcloud things too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/03/wordle_crop.png&quot;&gt;&lt;img src=&quot;/blog/img/wordle_crop.png&quot; alt=&quot;wordle_crop&quot; width=&quot;300&quot; height=&quot;287&quot; class=&quot;imgfull&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hopefully as the roll-out of the v3 Github API progresses the current search restriction will be lifted, still this was a fun glimpse at other programmer&#39;s conventions!&lt;/p&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align:right; font-size: .85rem;&quot;&gt;Full code to reproduce in this &lt;a href=&quot;https://gist.github.com/blmoore/9400832&quot;&gt;gist&lt;/a&gt;.&lt;br /&gt;
This post was originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/03/06/most-common-rng-seeds-r-github/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Slidify: Modern, simple presentations written in R Markdown</title>
   <link href="http://blmoore.github.io/blog/r/2014/02/24/slidify-presentations-in-r-markdown/"/>
   <updated>2014-02-24T00:00:00+00:00</updated>
   <id>http://blmoore.github.io/r/2014/02/24/slidify-presentations-in-r-markdown</id>
   <content type="html">&lt;p&gt;As a LaTeX fan I&#39;m used to using Beamer for presentations, but the built-in &lt;a href=&quot;http://www.hartwork.org/beamer-theme-matrix/&quot; target=&quot;_blank&quot;&gt;themes&lt;/a&gt; are definitely starting to show their age --- and writing a custom &lt;code&gt;.sty&lt;/code&gt; file looks like a nightmare --- so for a while I&#39;ve been looking at trying out an HTML5 framework.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://lab.hakim.se/reveal-js/&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;imgright&quot; alt=&quot;Reveal.js is a great looking HTML presentation framework from Hakim El Hattab.&quot; src=&quot;/blog/img/screen-shot-2014-02-24-at-19-55-11.png&quot; width=&quot;150&quot; height=&quot;102&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The first nice option I noticed was &lt;a href=&quot;http://lab.hakim.se/reveal-js/&quot; target=&quot;_blank&quot;&gt;reveal.js&lt;/a&gt; which seems to find a solid balance between looking sleek and modern, but not generating a prezi-like rollercoaster of a talk. Another project I came across, &lt;a href=&quot;http://bartaz.github.io/impress.js/&quot; target=&quot;_blank&quot;&gt;impress.js&lt;/a&gt;, probably leans towards the latter, and needs a decent array of web-dev skills to really customise.&lt;/p&gt;

&lt;p&gt;These are both nice solutions but require decent web development skills to take advantage of, else offer limited web UI front-ends. An ideal solution for me would be simple to write and look great from the outset, needing only minor CSS, Javascript and HTML tweaks to build a good-looking and functional slide deck.&lt;/p&gt;

&lt;h2&gt;Slidify&lt;/h2&gt;

&lt;p&gt;Enter &lt;a href=&quot;http://slidify.org/&quot; target=&quot;_blank&quot;&gt;slidify&lt;/a&gt; written by Ramnath Vaidyanathan (&lt;a href=&quot;https://github.com/ramnathv&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt;), a wrapper of several libraries which allows you to go from simple R Markdown to slick HTML presentations. The &lt;a href=&quot;http://slidify.org/samples/intro/&quot; target=&quot;_blank&quot;&gt;introductory presentation&lt;/a&gt; gives a nice overview of what&#39;s possible and how simple these slide decks can be to write.&lt;/p&gt;

&lt;p&gt;As the author modestly points out, slidify really is a go-between to other R packages:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knitr&lt;/code&gt; (&lt;a href=&quot;http://yihui.name/knitr/&quot; target=&quot;_blank&quot;&gt;link&lt;/a&gt;) — (a replacement for Sweave) think IPython notebook for R and other languages&lt;/li&gt;
&lt;li&gt;&lt;code&gt;whisker&lt;/code&gt; (&lt;a href=&quot;https://github.com/edwindj/whisker&quot; target=&quot;_blank&quot;&gt;link&lt;/a&gt;) — for making use of &lt;a href=&quot;http://mustache.github.io/mustache.5.html&quot; target=&quot;_blank&quot;&gt;mustache&lt;/a&gt; (geddit?) &quot;logic-less templating&quot;, which reminds me a lot of MediaWiki markup templates with extended functionality&lt;/li&gt;
&lt;li&gt;R Markdown — the markdown extension introduced by the &lt;a href=&quot;http://www.rstudio.com/&quot; target=&quot;_blank&quot;&gt;RStudio&lt;/a&gt; team&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Together with slidify these packages make writing and customising presentations a breeze, so install the library from github (using Hadley Wickham&#39;s &lt;code&gt;devtools&lt;/code&gt;) per the instructions &lt;a href=&quot;http://slidify.org/start.html&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;. It also comes with some great default themes, like Google&#39;s io2012 (my favourite) and &lt;a href=&quot;http://imakewebthings.com/deck.js/&quot; target=&quot;_blank&quot;&gt;deck.js&lt;/a&gt;. The video below shows how to get started authoring presentations much better than I could:&lt;/p&gt;

&lt;div style=&quot;margin-left:auto; margin-right: auto; width:480px;&quot;&gt;
&lt;iframe width=&quot;480&quot; height=&quot;360&quot; src=&quot;//www.youtube.com/embed/I95GOmLc7TA&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;

&lt;h2&gt;Features&lt;/h2&gt;

&lt;p&gt;There&#39;s a tonne of cool things slidify can do that I haven&#39;t even explored yet, but that look great. Of course, through knitr you can embed R code, including analysis and plot generation, in your presentation, bringing together reproducible analysis and neat presentation of your results. Even cooler, it plays nice with &lt;a href=&quot;http://rcharts.io/&quot; target=&quot;_blank&quot;&gt;rCharts&lt;/a&gt; — from the same author — allowing interactive charts to be embedded in presentations; oh and Shiny applications can be added too, according to &lt;a href=&quot;http://slidify.github.io/dcmeetup/demos/interactive/&quot; target=&quot;_blank&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Slidify enables straightforward github publishing (just &lt;code&gt;author()&lt;/code&gt;) and RStudio allows quick upload to &lt;a href=&quot;http://rpubs.com/&quot; target=&quot;_blank&quot;&gt;RPubs&lt;/a&gt;, both make it trivial to have an online and archived copy of your presentation.&lt;/p&gt;

&lt;h3&gt;Convert to PDF&lt;/h3&gt;

&lt;p&gt;A PDF is a nice security blanket to have if you&#39;re worried about unforeseeable display issues on presentation day — it&#39;s a format designed to be environment independent after all. With the io2012 theme, this can be done natively from chrome using the print dialogue, &lt;em&gt;however &lt;/em&gt;I&lt;em&gt; &lt;/em&gt;consistently found that for my presentation at least, the active slide you are viewing and and sometimes an adjacent slide is glitched in the PDF output.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/02/screen-shot-2014-02-24-at-22-37-58.png&quot;&gt;&lt;img class=&quot;imgright&quot; alt=&quot;Chrome print PDF reproducibly bugs out on the active slide each time.&quot; src=&quot;/blog/img/screen-shot-2014-02-24-at-22-37-58.png&quot; width=&quot;240&quot; height=&quot;118&quot; /&gt;&lt;/a&gt;
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;The hacky fix for this was to go to the final slide of the talk, print all but the last slide to PDF, then go back to an earlier slide and only print to file that remaining last slide. Then &lt;a href=&quot;http://support.apple.com/kb/ht4075&quot; target=&quot;_blank&quot;&gt;stitch these files together&lt;/a&gt; in Preview (assuming OS X), or &lt;code&gt;Imagemagick&lt;/code&gt; or whatever.&lt;/p&gt;

&lt;p&gt;Other than this active-slide glitch the PDF conversion worked surprisingly well and the output is passable as a decent presentation, albeit without the finesse of the subtle default transitions.&lt;/p&gt;

&lt;h4&gt;Update:&lt;/h4&gt;

&lt;p&gt;On twitter Ramnath &lt;a href=&quot;https://twitter.com/ramnath_vaidya/status/438466893931094016&quot; target=&quot;_blank&quot;&gt;points out&lt;/a&gt; that this is a recent problem with the Chrome browser, and Safari or Firefox should be able to export to PDF without issue. A quick check with Safari confirms that&#39;s the case for my presentation.&lt;/p&gt;

&lt;h2&gt;Issues&lt;/h2&gt;

&lt;p&gt;There were a couple of things that either can&#39;t be done (without digging deep into the js) or at least things I couldn&#39;t figure out after some (non-extensive) googling.&lt;/p&gt;

&lt;h3&gt;Image features&lt;/h3&gt;

&lt;p&gt;First, making things appear sequentially (like PowerPoint bullet points) is achieved simply with:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;## Slide title&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; First bullet point to appear
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; Second...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But for an image to then appear in the same way seems to require a continuation of the &lt;code&gt;ul&lt;/code&gt;, i.e. your image needs a bullet point (?). Maybe I&#39;m wrong on this but when included without the bullet point, the image seems to then precede the other bulleted content.&lt;/p&gt;

&lt;p&gt;Another issue was resizing and centering images. I made use of the code from &lt;a href=&quot;http://stackoverflow.com/a/18640582/1274516&quot; target=&quot;_blank&quot;&gt;this answer&lt;/a&gt; on SO to add the quick and dirty CSS / jQuery to auto-centre / reduce oversized images for the slideshow. For me it would be nice for this to be default behaviour, but I suppose for a web developer this is trivial everyday stuff:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;!--&lt;/span&gt; Limit image width and height &lt;span class=&quot;o&quot;&gt;--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;style type&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/css&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
img &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  max&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;height&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;560&lt;/span&gt;px&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  max&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;width&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;964&lt;/span&gt;px&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;p&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;!--&lt;/span&gt; Center image on slide &lt;span class=&quot;o&quot;&gt;--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;script type&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; src&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;script&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;script type&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;p:has(img)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;.addClass&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;centered&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;RStudio integration&lt;/h3&gt;

&lt;p&gt;This caused some confusion for me, but RStudio actually has its own presentation framework and uses slightly different markdown syntax to create it. On reviewing the two, it doesn&#39;t seem as developed as Slidify yet, and the defaults aren&#39;t as polished as the io2012 deck. The confusing part is, somewhere between the packages &lt;code&gt;slidify&lt;/code&gt; and &lt;code&gt;slidifyLibraries&lt;/code&gt; a function overloads RStudio&#39;s &lt;code&gt;Knit HTML&lt;/code&gt; button, faking seamless integration.&lt;/p&gt;

&lt;p&gt;The result is that the IDE is a great place to write the presentation, but I can&#39;t help thinking, as was mentioned &lt;a href=&quot;https://twitter.com/kohske/status/436355371498618880&quot; target=&quot;_blank&quot;&gt;on twitter recently&lt;/a&gt;, that the slidify framework would make a nice alternative or replacement for RStudio&#39;s current offering.&lt;/p&gt;

&lt;h3&gt;Customising the title slide&lt;/h3&gt;

&lt;p&gt;One of the problems I had was editing the theme&#39;s title slide. Most of the presentation is amenable to CSS hacking but the title slide is stubbornly hardcoded. (Well, it&#39;s not of course but the file is buried in the library install.)&lt;/p&gt;

&lt;p&gt;The way I got at this file was by changing the presentation mode (within the YAML frontmatter) to &lt;code&gt;selfcontained&lt;/code&gt;, and run slidify, copying the libraries folder to the same directory as your &lt;code&gt;.Rmd&lt;/code&gt; file. Then, for the io2012 deck, the title slide template is at (&lt;a href=&quot;http://stackoverflow.com/questions/15251751/adding-an-image-to-title-slide-using-slidify&quot; target=&quot;_blank&quot;&gt;thanks&lt;/a&gt; Ramnath):&lt;/p&gt;

&lt;p&gt;&lt;code&gt;libraries/frameworks/io2012/partials/titleslide.html&lt;/code&gt;&lt;/p&gt;

&lt;h2&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;I found slidify to be a great package and I ended up with, what I consider to be, the cleanest and nicest-looking presentation I&#39;ve made to date. Also I&#39;ve learnt a bit of web-programming along the way! I expect I&#39;ll be switching from beamer to slidify for future talks too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/02/screen-shot-2014-02-24-at-22-20-531.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;The final(ish) presentation in all its glory. Link may not work for long.&quot; src=&quot;/blog/img/screen-shot-2014-02-24-at-22-20-531.png&quot; width=&quot;500&quot; height=&quot;318&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Meticulously recreating bitmap plots in R</title>
   <link href="http://blmoore.github.io/blog/wikipedia/2014/02/03/meticulously-recreating-bitmap-plots-in-r/"/>
   <updated>2014-02-03T00:00:00+00:00</updated>
   <id>http://blmoore.github.io/wikipedia/2014/02/03/meticulously-recreating-bitmap-plots-in-r</id>
   <content type="html">&lt;p&gt;There&#39;s a hard-fought drive on Wikimedia commons to convert those images that should be in vector format (i.e. graphs, diagrams) from their current bitmap form. At the time of writing, the relevant category has over &lt;a href=&quot;https://commons.wikimedia.org/wiki/Category:Images_that_should_use_vector_graphics&quot; target=&quot;_blank&quot;&gt;7000&lt;/a&gt; images in the category &quot;Images that should use vector graphics&quot;.&lt;/p&gt;

&lt;p&gt;The usual way people move between the two is by tracing over the raster, and great tools like &lt;a href=&quot;http://www.inkscape.org/en/&quot; target=&quot;_blank&quot;&gt;Inkscape&lt;/a&gt; (free open-source software) can help a lot with this. But in the case of graphs I thought it&#39;d be fun to try and rebuild a carbon copy from scratch in R.&lt;/p&gt;

&lt;h2&gt;The original&lt;/h2&gt;

&lt;p&gt;The file that first caught my eye was this nice graph of US employment stats, currently used on the highly-trafficked &lt;a href=&quot;https://en.wikipedia.org/wiki/Barack_Obama&quot; target=&quot;_blank&quot;&gt;Obama article&lt;/a&gt;. I&#39;m not sure what drew this originally, it doesn&#39;t look like Excel because of the broken axis and annotations, but maybe it is. It&#39;s currently a png at about 700 × 500 so should be an easy target for improvement.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/02/original.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;This is the original bitmap plot I wanted to recreate.&quot; src=&quot;/blog/img/original.png&quot; width=&quot;500&quot; height=&quot;343&quot; /&gt;&lt;/a&gt; This is the original bitmap plot I wanted to recreate.
&lt;em&gt;(Courtesy of &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:US_EmpStatsBLS_Jan09-Feb13.png&quot; target=&quot;_blank&quot;&gt;Wikimedia Commons&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;

&lt;h2&gt;Figure 2.0&lt;/h2&gt;

&lt;p&gt;The two raw data files are available &lt;a href=&quot;http://data.bls.gov/timeseries/LNS14000000&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;http://data.bls.gov/timeseries/CES0000000001?output_view=net_1mth&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; as Excel spreadsheets. They have some weird unnecessary formatting so the various xls parsers for R won&#39;t work; save the tables from Excel as csv. I won&#39;t talk through the code as it wasn&#39;t too taxing (or clean) but it&#39;ll be at the end of the post. Here&#39;s what I came up with:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://upload.wikimedia.org/wikipedia/commons/2/25/US_Employment_Statistics.svg&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;I realise the irony in having to upload a bitmap version for wordpress, but click for the SVG.&quot; src=&quot;/blog/img/recre_v5.png&quot; width=&quot;500&quot; height=&quot;349&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I expanded my plot to include the 2013 data, so it inescapably has slightly different proportions to the original. And I was working on a single monitor at the time so I didn&#39;t have a constant comparison. I can see now a few things are still off, the fonts are different sized for one and I ditched the broken axis, but overall I think it&#39;s a decent similarity!&lt;/p&gt;

&lt;h2&gt;ggplot2 version&lt;/h2&gt;

&lt;p&gt;Two y-axes on the same graph is bad, bad, bad and unsurprisingly forbidden with ggplot2 but I did come across &lt;a href=&quot;http://rwiki.sciviews.org/doku.php?id=tips:graphics-ggplot2:aligntwoplots&quot; target=&quot;_blank&quot;&gt;this&lt;/a&gt; method of dummy-facetting and then plotting separate layers per facet. An obvious problem is now the y-axis are representing different things and you only have one label. A hacky fix is to write your ylabs into the facet header (I&#39;m 100% confident Hadley Wickham and Leland Wilkinson would not be impressed with this). Another alternative would be to use map a colour aesthetic to your y-axis values and label it in the legend (again, pretty far from recommended practice).&lt;/p&gt;

&lt;p&gt;This is what I ended up with, I still think it&#39;s a reasonable alternative to the above, and the loess fitted model nicely shows the unemployment rate trend without the seasonality effects:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/02/ggplot_bitmap.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;ggplot_bitmap&quot; src=&quot;/blog/img/ggplot_bitmap.png&quot; width=&quot;500&quot; height=&quot;432&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;Article version&lt;/h2&gt;

&lt;p&gt;While mimicking the original exactly was fun (for me at least), I tried to improve upon it for the actual final figure for use on Wikipedia. For instance, it now uses unambiguous month abbreviations, and I swapped the legend for colour-coded text labels. It still has some of the original&#39;s charm though. Looks like after a bit of a rough patch, your employment statistics are starting to look pretty good Mr. President.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/02/new_v2.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;new_v2&quot; src=&quot;/blog/img/new_v2.png&quot; width=&quot;500&quot; height=&quot;332&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Next up, the other &lt;em&gt;much&lt;/em&gt; less attractive figures on that page ([&lt;a href=&quot;https://en.wikipedia.org/wiki/File:U.S._Total_Deficits_vs._National_Debt_Increases_2001-2010.png&quot; target=&quot;_blank&quot;&gt;1&lt;/a&gt;], [&lt;a href=&quot;https://en.wikipedia.org/wiki/File:PPACA_Premium_Chart.jpg&quot; target=&quot;_blank&quot;&gt;2&lt;/a&gt;]).&lt;/p&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align:right; font-size: .85rem;&quot;&gt;Code available in a &lt;a href=&quot;https://gist.github.com/blmoore/8794075&quot; target=&quot;_blank&quot;&gt;gist&lt;/a&gt;.&lt;br /&gt;
Originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/02/03/meticulously-recreating-bitmap-plots-in-r/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Wikipedia is dead, long live the 'pedia</title>
   <link href="http://blmoore.github.io/blog/wikipedia/2014/01/09/wikipedia-is-dead-long-live-the-pedia/"/>
   <updated>2014-01-09T00:00:00+00:00</updated>
   <id>http://blmoore.github.io/wikipedia/2014/01/09/wikipedia-is-dead-long-live-the-pedia</id>
   <content type="html">&lt;p&gt;I was a bit surprised when looking at the Wikipedia pageviews for 2013 (nicely presented &lt;a href=&quot;http://reportcard.wmflabs.org/&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;). After 5 years of consistent and reasonably stable growth, over 2013 monthly pageviews actually dropped, and to the tune of 2 *billion* views  (10%) from their peak early in the year.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/01/pviews.png&quot;&gt;&lt;img class=&quot;imgfull&quot; alt=&quot;pviews&quot; src=&quot;/blog/img/pviews.png&quot; width=&quot;500&quot; height=&quot;352&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This was surprising to me. The problem Wikipedia has attracting new editors has been &lt;a href=&quot;http://www.technologyreview.com/featuredstory/520446/the-decline-of-wikipedia/&quot; target=&quot;_blank&quot;&gt;well-publicised&lt;/a&gt;, but it&amp;#39;s never had trouble with PageRank or increasing its reach to casual viewers.&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;Well, it turns out one area seeing consistent and healthy growth is, as you would guess, mobile views, which are showing gains of about 150k pageviews a month on English Wikipedia. This makes up for almost half a billion of those lost over 2013 in the graph above, but still leaves some explaining to do.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://benjaminlmoore.files.wordpress.com/2014/01/mobile1.png&quot;&gt;&lt;img class=&quot;imgright&quot; alt=&quot;mobile&quot; src=&quot;/blog/img/mobile1.png&quot; width=&quot;500&quot; height=&quot;352&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Interestingly, another useful metric of web traffic, unique visitors per month, continues to &lt;a href=&quot;http://reportcard.wmflabs.org/&quot; target=&quot;_blank&quot;&gt;grow considerably&lt;/a&gt;. Maybe this reflects how mobile visitors use the site differently, just looking something up (e.g. to settle an argument) and closing their browser as opposed to a few hours going from topic to topic and ending up admiring a &lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_Eiffel_Tower_replicas&quot; target=&quot;_blank&quot;&gt;list of Eiffel tower replicates&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;imgright&quot; alt=&quot;mvvu&quot; src=&quot;/blog/img/mvvu.png&quot; width=&quot;360&quot; height=&quot;254&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A quick graph of mean monthly pageviews per visitor gives this theory some support, but the data seems pretty noisy and has varied a lot over the past few years.&lt;/p&gt;

&lt;p&gt;Another possibility is that this data is telling us what we already know: the unique visitors with the highest total page views must be the article writers and the &lt;a href=&quot;https://en.wikipedia.org/wiki/Wikipedia:WikiGnome&quot; target=&quot;_blank&quot;&gt;Wikignomes&lt;/a&gt; that built the place — and they&#39;ve been in precipitous decline for nearly &lt;a href=&quot;https://en.wikipedia.org/wiki/File:Wikipedia_editor_numbers.svg&quot; target=&quot;_blank&quot;&gt;6 years now&lt;/a&gt;. I&#39;m speculating of course, but maybe that&#39;s starting to show through on the page views site-wide, emphasising how much work a small group of people have been putting in, and the dent they&#39;re leaving in Wikipedia as they leave.&lt;/p&gt;

&lt;hr /&gt;

&lt;p style=&quot;text-align: right; font-size: .85rem;&quot;&gt;Full R code to reproduce the graphs shown in this post is in a &lt;a href=&quot;https://gist.github.com/blmoore/8343067&quot; target=&quot;_blank&quot;&gt;gist&lt;/a&gt;. &lt;br /&gt;
This post was originally published on my
&lt;a href=&quot;http://benjaminlmoore.wordpress.com/2014/01/09/wikipedia-is-dead-long-live-the-pedia/&quot; target=&quot;_blank&quot;&gt;Wordpress blog&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;
</content>
 </entry>
 

</feed>
